# Как пользоваться Git и Github

Для нашего проекта понадобятся совсем немногие моменты

## Сначала было слово и слово было "Git"
Иначе говоря, скачай [отсюда](https://git-scm.com/) git (если будут предлагать установить git bash, то рекомендую это сделать. Git bash - это удобный вариант терминала для работы с git)

## Клонирование репозитория
Для начала, надо склонировать себе репозиторий:
1. Зайди в [репозиторий](https://github.com/KozlovKV/game-life)
2. Нажми на указанные на [скрине](https://disk.yandex.ru/i/nCNKHkStwCA-kA) кнопки и скопируй ссылку
3. Зайди в папку, внутри которой будет папка с проектом и пропиши команду `git clone <скопированный_адрес> <имя_папки проекта>`
4. PROFIT

## Идея git'a
Гит можно сравнить с сохранениями из игр. Мы можем пройти квест и сохраниться, потом пройти данж и сделать ещё один сэйв. Дальше выяснить, что мы соверишили ошибку в прохождении данжа и сначала надо было залутаться в другом месте. Тогда мы откатимя к сэйву после завершения квеста и пойдём в другой данж. Получится следующая схема сохранений:
```
      -> D1
     /
Q1 ->|
     \
      -> D2
```
Мы создали две отдельных ветки, в которых у нас немного отличается состояние мира и персонажа.

Гит работает почти также: у нас есть основные ветки с главными сохранениями (самая главная ветка - `master`. Вторая по важности `develop`). Когда мы хотим реализовать новую фичу, мы создаём новую ветку и реализуем там всё, что хотели, делая попутно сохранения (тут они называются коммиты). Когда доделали фичу до конца, синхронизируем эту ветку с фиче и главную ветку `develop`. Теперь перейдём к командами.

## Основные командны
*Чтобы они работали, нам необходимо в терминале зайти в папку с проектом*

- `git branch` - показывает, какие ветки существуют на данный момент
- `git switch <имя_ветки>` - переключиться на нужную существующую ветку
  - `git switch -c <имя_ветки>` - создаёт новую ветку от текущей ветки 
- `git status` - показывает, в каких файлах были изменения от последнего коммита
- `git add <имя_фалов_или_другие_условия>` - добавляет файлу в отслеживание для будущего коммита
  - Для добавления в отслеживание всех файлов, в которых были изменения, вместо имён файлов можно указать `-A` или `--all`
- `git commit -m "Описание коммита"` - делаем сохранение на нашей ветке всех файлов, которые добавили в отслеживание
- `git merge <имя_другой_ветки>` - производит слияние текущей ветки с указанной веткой. **Причём вливается именно другая ветка в ту, на которой мы находимся**
- `git pull` - загружает с сервера состояние текущей ветки, если оно отличается от локального
- `git push` - отправляет на сервер изменения, сделанные на ветке
  - Если ветка пока что существует только локально, то отправить её на сервер можно следующей командой: `git push -u origin <имя_ветки>` (*`origin` - имя удалённого сервера. Иногда оно может быть другим, но обычно он зовётся именно так*)

## Как должен проходить основной цикл работы
1. Находясь на ветке `develop`: `git pull`
2. Реализуешь новую фичу (нужна новая ветка):
   1. `git switch -c <ветка_на_которой_будешь_работать>`
3. Если модифицируешь старую фичу или по какой-либо ещё причине должен работать с уже имеющейся веткой:
   1. `git switch <ветка_на_которой_будешь_работать>`
   2. `git pull` - на всякий случай эту ветку тоже надо синхронизировать с сервером
   3. `git merge develop` - для простоты последующий слияний и работы с актуальной версией подтягиваем все изменения с основной ветки разработки
4. Пишем код, делаем схемы и т.д. и т.п.
5. `git status` - чисто для проверки, какие файлы мы изменили
6. `git add` - обычно я пишу с флагом `-A`, но можно, конечно, и прописывать всё вручную
7. `git commit -m "Описываешь, что сделал (лучше по-английский)"`
8.  `git merge develop` - ещё раз синхронизируемся с главной веткой, чтобы убедиться, что не возникло конфликтов (**Мы в этот момент находимся на нашей ветке с фичей**)
9.  `git push` - либо расширенную версию этой команды, если ветка новая
10. Если с этой фичей закончили, то возвращаемся на главную ветку и снова идём по этому циклу.

Примечания:
1. Очевидно, но всё же уточню: имена веток на английском и, желательно, говорящие о том, что на этой ветке должно быть сделано.
2. **Ветку `master` не трогать**
3. Полноценное вливание ветки с новой фичей в `develop`, если исполнять эту инструкцию и всегда прописывать `git pull`, проблем не вызовет и будет делаться просто командой `git merge <имя_ветки_с_фичей>` (когда мы на ветке `develop`), но иногда всё же могут возникнуть неприятные конфликты, так что в начале такими слияниями буду заниматься я. В свободное время могу объяснить, как разрешать конфликты, это не очень сложно.

## Отдельное примечание по логину
При запросах на сервер необходима авторизация.

Самый лучший вариант - [сделать себе SSH-ключ](https://docs.github.com/en/authentication/connecting-to-github-with-ssh), но можно и использовать логин с паролем.

Чтобы не вводить логин и пароль при каждой команде `git push/pull`, можно в настройках гита указать сохранение учётных данных на некоторое время:

`git config --global credential.helper cache --timeout 2592000` (*Цифра в данном случае указывает, сколько секунд будут храниться данные. Тут я указал месяц*)

## Немного приятностей
Знаешь, что такое алиасы? Надеюсь, что да, потому что описывать сейчас я это не особо хочу да и смысла особого не вижу, просто объясню, как ими пользоваться

Пишем в терминале `git config --global -e`, после этого откроется текстовые редактор для глобального конфига. Если выполнил условие выше, в нём уже должны быть блоки `[user]` (без него работа гита вообще не возможна) и `[credential]`. Добавляем сюда ещё один блок:
```conf
[alias]
	aa = add -A
	st = status
	sw = switch
	br = branch
	swc = switch -c
	ci = commit
	cim = commit -m
	pu = push -u
	puo = push -u origin
	rs = remote show
	rso = remote show origin
	adog = log --all --decorate --oneline --graph
	type = cat-file -t
	dump = cat-file -p
```
Поздравляю! Теперь вместо команд справа можешь писать сокращения слева - эффект будет точно такой же. Можешь заметить тут в списке 2 команды, о которых я не говорил. Эксперимента ради можешь прописать их сам - риска никакого, а эффект может быть интересным.